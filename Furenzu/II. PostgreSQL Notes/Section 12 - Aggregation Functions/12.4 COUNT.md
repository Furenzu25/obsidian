# üìò Study Notes: Using the `COUNT()` Function in PostgreSQL

---

## üëã Welcome!

Hello students!  
In this lesson, we explored the **`COUNT()`** function ‚Äî a fundamental SQL tool used to count rows in a table and gain insights through aggregation.

---

## üî¢ What is `COUNT()`?

`COUNT()` is used to **count the number of rows** in a query result.

It supports multiple formats:

- `COUNT(*)` ‚Äì Counts **all rows**, including duplicates and `NULL`s.
    
- `COUNT(column_name)` ‚Äì Counts **non-NULL values** in the specified column.
    
- `COUNT(DISTINCT column_name)` ‚Äì Counts **unique, non-NULL** values only.
    

---

## ‚öôÔ∏è Basic Syntax
	
	sql
	
`SELECT COUNT(*) FROM table_name WHERE condition;`

‚úÖ Counts all matching rows (including duplicates and `NULL` values).

---

## ‚ö†Ô∏è Performance Tip

Be cautious with `COUNT(*)` on large tables:

- It performs a **full table scan**, which can be **slow**.
    
- Especially problematic during **high-traffic transactions**.
    

---

## üß† Understanding COUNT Variations

### üü¢ `COUNT(*)`

- Counts **all rows**, no filter.
    
- Even rows with `NULL`s or duplicates are included.
    

### üîµ `COUNT(column_name)`

- Ignores rows where the specified column is `NULL`.
    

### üü£ `COUNT(DISTINCT column_name)`

- Counts only **unique** and **non-NULL** values.
    

---

## üß™ Practical Examples

### üìÅ Example 1: Total Transactions in the `payment` Table
	
	sql
	
`SELECT COUNT(*) FROM payment;`

üßæ **Output**: Over 14,500 transactions processed.

---

### üí∏ Example 2: Number of Unique Payment Amounts
	
	sql
	
`SELECT COUNT(DISTINCT amount) FROM payment;`

üìä **Output**: 19 unique payment amounts ‚Äî indicates 19 different price points.

---

### üë• Example 3: Number of Payments per Customer
	
	sql
	
`SELECT customer_id, COUNT(*)  FROM payment  GROUP BY customer_id;`

üìå Groups customers by ID and counts how many payments each made.

üß† Great for identifying:

- Who pays the most
    
- Who uses the rental service frequently
    

---

### üïµÔ∏è‚Äç‚ôÇÔ∏è Example 4: Customers with More Than 40 Payments
	
	sql
	
`SELECT customer_id, COUNT(*)  FROM payment  GROUP BY customer_id  HAVING COUNT(*) > 40;`

üîç Filters only customers who made **more than 40 payments** ‚Äî potentially heavy users or frequent renters.

---

## ‚úçÔ∏è GROUP BY + COUNT

`GROUP BY` is often paired with `COUNT()` to:

- Organize data into logical groups
    
- Perform aggregations (e.g., total payments per customer)
    
	sql
	
`SELECT category, COUNT(*)  FROM items  GROUP BY category;`

---

## üîç When to Use `HAVING`

`HAVING` allows you to **filter grouped results** based on an aggregate condition.

Unlike `WHERE`, which filters rows before grouping, `HAVING` filters after.

---

## üí° Summary Table

|Function|Purpose|
|---|---|
|`COUNT(*)`|Counts all rows (including NULLs)|
|`COUNT(column_name)`|Ignores NULL values|
|`COUNT(DISTINCT column_name)`|Counts only unique, non-NULL values|
|`GROUP BY`|Groups data for aggregation|
|`HAVING`|Filters groups after aggregation|

---

## ‚úÖ Wrap-Up

- `COUNT()` is simple but extremely powerful for **data insights**.
    
- Use it with `GROUP BY` and `HAVING` for more meaningful analysis.
    
- Be mindful of performance on large tables!