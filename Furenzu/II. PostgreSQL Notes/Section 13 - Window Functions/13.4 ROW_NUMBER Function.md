# ğŸ“˜ Study Notes: Understanding `ROW_NUMBER()` in SQL

## ğŸ‘‹ Hello Students!

Welcome back! In todayâ€™s lesson, weâ€™re diving into another **window function**: the **`ROW_NUMBER()`** function. Letâ€™s explore how it works, how it compares to other ranking functions, and how you can use it effectively in SQL queries.

---

## ğŸ”¢ What is `ROW_NUMBER()`?

- `ROW_NUMBER()` assigns a **unique sequential number** to each row **within a partition**.
    
- Numbers start at **1** and **increase by one** for each subsequent row.
    
- If **no `PARTITION BY` is used**, all rows are treated as one single group (partition).
    

### ğŸ§  Key Features:

|Feature|Behavior|
|---|---|
|Unique Numbers|âœ… Each row has a unique number|
|Ties (equal values)|âŒ Not grouped together, still unique numbers|
|Gaps in Ranking|âŒ No gaps â€” purely sequential|
|Partitioning|âœ… Optional; defines how data is grouped|
|Ordering|âœ… Required to define ranking order|

---

## ğŸ§ª Basic Syntax
	
	sql
	
`SELECT column_name,        ROW_NUMBER() OVER (            PARTITION BY column_name  -- optional            ORDER BY column_name        ) AS row_num FROM table_name;`

---

## ğŸ’¼ Example 1: Simple `ROW_NUMBER()` by Product ID

Using a `products` table (with smartphones, laptops, etc.), we assign row numbers ordered by product ID.
	
	sql
	
`SELECT product_id,        name,        ROW_NUMBER() OVER (ORDER BY product_id) AS row_num FROM products;`

ğŸ“Œ _This ranks all products in one partition, ordered by `product_id`._

---

## ğŸ—‚ï¸ Example 2: Using `PARTITION BY`

To see `ROW_NUMBER()` in action with partitions, letâ€™s divide products by group (e.g., smartphones, tablets).
	
	sql
	
`SELECT product_id,        name,        group_id,        ROW_NUMBER() OVER (            PARTITION BY group_id            ORDER BY product_id        ) AS row_num FROM products;`

ğŸ“Œ _Each group gets its own ranking starting from 1._

---

## ğŸ› ï¸ Additional Use Cases

### âœ… Ordering by Name within Groups

You can also change the `ORDER BY` clause to use product names:
	
	sql
	
`ROW_NUMBER() OVER (     PARTITION BY group_id     ORDER BY name )`

---

## ğŸ§® DISTINCT Values with `ROW_NUMBER()`

Want to assign row numbers **only to unique prices**? Here's how:

### âŒ Problem:

If you use `ROW_NUMBER()` on a column with duplicate prices, those duplicates will each get a unique row number (which might not be what you want).

### âœ… Solution:

Use a **CTE** or **subquery** to filter out duplicates first:
	
	sql
	
`WITH distinct_prices AS (     SELECT DISTINCT price     FROM products ) SELECT price,        ROW_NUMBER() OVER (ORDER BY price) AS row_num FROM distinct_prices;`

ğŸ“Œ _This gives clean, non-redundant rankings for distinct prices._

---

## ğŸ“„ Pagination with `ROW_NUMBER()`

You can use `ROW_NUMBER()` to paginate results â€” that is, return a specific range of rows (like rows 6â€“10).
	
	sql
	
`WITH numbered_products AS (     SELECT *,            ROW_NUMBER() OVER (ORDER BY name) AS row_num     FROM products ) SELECT * FROM numbered_products WHERE row_num BETWEEN 6 AND 10;`

ğŸ¯ _This is useful in web apps when you want to display limited results per page._

---

## ğŸ… Finding the nth Most Expensive Product

Want the **3rd most expensive product**?
	
	sql
	
`WITH ranked_prices AS (     SELECT *,            ROW_NUMBER() OVER (ORDER BY price DESC) AS row_num     FROM products ) SELECT * FROM ranked_prices WHERE row_num = 3;`

âœ… _Result:_ Youâ€™ll find the product with the third highest price (e.g., Dell Vostro 800).

---

## ğŸ” Adjusting Rank Targets

You can easily change the filter:

- `WHERE row_num = 1` â†’ Most expensive
    
- `WHERE row_num = 5` â†’ 5th most expensive
    
- And so on!
    

This makes `ROW_NUMBER()` great for **leaderboards**, **top-N queries**, or **benchmarking**.

---

## ğŸ§© Final Recap

|Concept|Description|
|---|---|
|`ROW_NUMBER()`|Assigns a unique number to each row|
|`PARTITION BY`|Splits data into groups for separate row numbering|
|`ORDER BY`|Determines how row numbers are assigned|
|Use Cases|Pagination, ranking by group, finding top-N items|
|Duplicate Handling|Requires filtering (e.g., `DISTINCT` or `CTE`) if needed|

---

## âœ… Thatâ€™s a Wrap!

You've now learned how to:

- Assign sequential row numbers using `ROW_NUMBER()`
    
- Partition data for grouped rankings
    
- Apply it in real-world scenarios like pagination and top-N queries
    

All SQL commands used in class are available for download and practice. ğŸ§‘â€ğŸ’»

ğŸš€ Letâ€™s keep the momentum going â€” see you in the next lesson!