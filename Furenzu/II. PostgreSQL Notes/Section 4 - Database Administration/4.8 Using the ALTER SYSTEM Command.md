# 📘 **PostgreSQL Configuration & Parameter Administration – Study Notes**

## 🧠 **Overview**

This lesson focuses on the **administration of PostgreSQL parameters**, highlighting:

- How to **view and modify configuration settings**
    
- The **types of parameters**
    
- The use of the **`ALTER SYSTEM`** command
    
- How PostgreSQL handles **configuration changes**
    

---

## 🔧 **Main Configuration Files**

PostgreSQL has **two primary configuration files**:

1. **`postgresql.conf`** – Main config file for instance settings.
    
2. **`pg_hba.conf`** – Handles user authentication and access permissions.
    

To apply changes in these files, you typically:

- Edit them manually
    
- Save
    
- **Restart the PostgreSQL service** (daemon)
    

This is a manual and sometimes time-consuming process.

---

## 🖥️ **Alternative: ALTER SYSTEM**

Instead of editing config files directly, you can use:

	sql

`ALTER SYSTEM SET parameter TO value;`

- Can only be used by a **superuser**
    
- Allows changes to parameters via **psql** without opening config files manually
    
- Uses a file called `postgresql.auto.conf` for changes
    

However:

- Not all parameters can be changed this way
    
- Some still require a **daemon restart** to take effect
    

---

## 🔄 **Types of Parameters**

There are **3 main types of parameters**, each with different change requirements:

### 1. **Internal (Non-editable)**

- Set during PostgreSQL installation
    
- **Cannot be modified**
    
- Examples: `server_version`, `block_size`
    
- If you try to change these, PostgreSQL will reject the change
    

### 2. **Postmaster Parameters (Require Restart)**

- Can be changed but **require PostgreSQL service restart**
    
- Common in **memory and instance-level settings**
    
- Examples:
    
    - `shared_buffers` – Allocated RAM for PostgreSQL
        
    - `port` – Listening port for the server
        
- These changes go to `postgresql.auto.conf`, but take effect only after a restart
    

### 3. **SIGHUP/Reload Parameters (No Restart Required)**

- Can be changed **immediately with `pg_reload_conf()`**
    
- No need to restart the server
    
- Examples:
    
    - Logging parameters (e.g. `log_directory`, `log_rotation_age`)
        
    - Sync-related parameters (e.g. `fsync`, `synchronous_commit`)
        

---

## 🔍 **Viewing Parameters**

You can list and inspect PostgreSQL parameters using:

	sql

`SELECT name, setting, context FROM pg_settings;`

- Returns all configurable parameters (~370+)
    
- The `context` field indicates how the parameter can be changed (e.g., `postmaster`, `sighup`, `internal`, etc.)
    

---

## 💡 **Example: Modifying shared_buffers**

1. **View current setting:**
    
		sql
    
    `SHOW shared_buffers;`
    
2. **Change with ALTER SYSTEM:**
    
		sql
    
    `ALTER SYSTEM SET shared_buffers TO '250MB';`
    
3. **Apply the change (reload config):**
    
		sql
		
    `SELECT pg_reload_conf();`
    
4. **Check again:**
    
		sql
	
    `SHOW shared_buffers;`
    

> **Note:** Even after reload, the value won't update immediately. A **server restart** is required for postmaster parameters like `shared_buffers`.

---

## 🗃️ **postgresql.auto.conf**

- This file is **automatically generated** when using `ALTER SYSTEM`
    
- Located in the PostgreSQL **data directory**
    
- Contains overridden parameters
    
- Warning: **Do not edit this file manually!**
    

---

## 🔎 **Why Choose One Method Over the Other?**

- **ALTER SYSTEM** is practical for scripting or remote changes.
    
- **Editing the file directly** is often preferred for complex setups or batch configurations.
    
- Both require **admin access** and an understanding of the parameter's context.
    

---

## 📑 **Documentation and Further Reading**

PostgreSQL's official documentation contains detailed explanations of all parameters:

- Whether they are editable
    
- What context they belong to
    
- Default values and descriptions
    

Refer to the [official PostgreSQL documentation](https://www.postgresql.org/docs/current/runtime-config.html) for more.

---

## ✅ **Key Takeaways**

- Learn which parameters can be changed immediately and which require a restart.
    
- Use `ALTER SYSTEM` to avoid manual file editing, but know its limits.
    
- Always validate changes and understand the impact, especially on production systems.
    
- Remember to check `pg_settings` and `postgresql.auto.conf` to troubleshoot.